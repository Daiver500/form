(()=>{"use strict";(()=>{const e=document.querySelector(".modal__phone");IMask(e,{mask:"+{7}(000)000-00-00"});e&&e.addEventListener("input",(()=>{e.value.length<16?e.setCustomValidity("Номер должен быть из 10 цифр"):e.setCustomValidity(""),e.reportValidity()}));const t=document.querySelector(".main__button"),o=document.querySelector(".modal__close"),n=document.querySelector(".modal-success__close"),d=document.querySelector(".modal__name"),s=document.querySelector(".modal__phone"),c=document.querySelector(".modal"),i=document.querySelector(".modal__form"),l=document.querySelector(".modal__inner"),a=document.querySelector(".modal-success"),r=document.querySelector(".modal-success__inner");c.classList.add("hidden"),c.style.position="fixed",a.style.position="fixed",l.style.position="fixed",r.style.position="fixed";const m=e=>{"Escape"===e.key&&(y(),e.preventDefault())},u=e=>{e.target===c&&y()},v=()=>{c.classList.remove("hidden"),document.body.style.overflow="hidden",S(),o.addEventListener("click",y),c.addEventListener("click",u),document.addEventListener("keydown",m)},y=()=>{c.classList.add("hidden"),document.body.style.overflow="",o.removeEventListener("click",v),c.removeEventListener("click",u),document.removeEventListener("keydown",m)};t&&t.addEventListener("click",v),o&&o.addEventListener("click",y);const L=e=>{"Escape"===e.key&&(k(),e.preventDefault())},_=e=>{e.target===a&&k()},k=()=>{a.classList.add("hidden"),r.classList.remove("modal__animation"),n.removeEventListener("click",k),document.removeEventListener("click",_),document.removeEventListener("keydown",L)};i.addEventListener("submit",(function(e){e.preventDefault(),f(),s.value="",d.value="",c.classList.add("hidden"),a.classList.remove("hidden"),r.classList.add("modal__animation"),n.addEventListener("click",k),document.addEventListener("click",_),document.addEventListener("keydown",L)})),n&&n.addEventListener("click",k);let E=!0,p="";try{p=localStorage.getItem("login")}catch(e){E=!1}const f=e=>{d&&s?E&&localStorage.setItem("login",d.value):(e.preventDefault(),d.setCustomValidity("Нужно ввести имя кириллицей"),s.setCustomValidity("Нужно ввести телефон")),d.reportValidity(),s.reportValidity()},S=()=>{p?(d.value=p,s.focus()):d.focus()}})()})();